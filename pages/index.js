import Head from 'next/head'
import { useFormik } from 'formik'
import * as Yup from 'yup'  // form validation
import { useRouter } from 'next/router'

export default function Home() {

  //router
  const router = useRouter()


  //formik
  const formik = useFormik({
    initialValues: {
      name: '',
      email: '',
      country: 'India',
      terms: '',
    },
    
    //Validate form
    validationSchema: Yup.object({
      name: Yup.string().required('Name is required').max(20, 'Name must be under 20 characters or less'),
      email: Yup.string().email('Invalid email address').required('Email is required'),
      terms: Yup.array().required('Terms of service must be checked'),
    }),

    //Submit form
    onSubmit: (values) => {
      console.log(formik.values)
      router.push({pathname: '/success', query: values})
    },
  })

  console.log(formik.values)


  return (
    <div>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className='h-screen flex items-center justify-center '>
        <form className='bg-white flex rounded-lg w-1/2 shadow-lg shadow-gray-300 '>
          <div className='flex-1 text-gray-700 p-20'>
            <h1 className='text-3xl pb-3 font-bold'> 
              Let's get started ðŸ‘‹
            </h1>
            <p className='text-lg text-gray-500'>
              Join our E-learning platform today and unlock over 500+ courses
              and digital assets ready to download.
            </p>
            <div className='mt-6'>
            <div className='pb-4'>
                <label className={`block text-sm pb-2 ${formik.touched.name && formik.errors.name ? 'text-red-400' : ''}`}>
                  {formik.touched.name && formik.errors.name ? formik.errors.name : "Name"}
                </label>
                <input 
                  type='text' 
                  placeholder='Enter your name' 
                  name='name' 
                  className='border-2 border-gray-500 rounded-md p-2 w-1/2' 
                  value={formik.values.name} 
                  onChange={formik.handleChange} 
                  onBlur={formik.handleBlur}>
                </input>
            </div>
            <div className='pb-4'>
                <label className={`block text-sm pb-2 ${formik.touched.email && formik.errors.email ? 'text-red-400' : ''}`}>
                  {formik.touched.email && formik.errors.email ? formik.errors.email : "Email"}
                </label>
                <input 
                  type='email' 
                  placeholder='Enter your email' 
                  name='email' 
                  className='border-2 border-gray-500 rounded-md p-2 w-1/2' 
                  value={formik.values.email} 
                  onChange={formik.handleChange} 
                  onBlur={formik.handleBlur} >
                </input>
            </div>
            <div className='pb-4'>
                <label className='block text-sm pb-2'>Country </label>
                <select 
                  name='country' 
                  className='border-2 border-gray-500 rounded-md p-2 w-1/2' 
                  value={formik.values.country} 
                  onChange={formik.handleChange}>
                    <option>India</option>
                    <option>Some other country</option>
                </select>
            </div>

            <div className="pb-4">
                <label
                  htmlFor="terms"
                  className={`block font-latoBold text-sm pb-2 ${
                    formik.touched.terms && formik.errors.terms
                      ? "text-red-400"
                      : ""
                  }`}
                >
                  {formik.touched.terms && formik.errors.terms
                    ? formik.errors.terms
                    : "Terms of service"}
                </label>

                <div className="flex items-center gap-2">
                  <input
                    type="checkbox"
                    name="terms"
                    value="checked"
                    onChange={formik.handleChange}
                    onBlur={formik.handleBlur}
                    className="h-5 w-5 text-teal-500 border-2  background-gray-500 focus:border-teal-500 focus:ring-teal-500"
                  />
                  <p className="text-sm font-latoBold text-gray-500">
                    I agree to the Terms and Service that my data will be taken
                    and sold.
                  </p>
                </div>
              </div>

            <button className='bg-[#3AACD9] bold text-sm text-white mt-6 py-3 rounded-lg w-full' type='submit'>Start Learning Today!!</button>
            
            </div>
          </div>
        </form>
      </main>
    </div>
  )
}
